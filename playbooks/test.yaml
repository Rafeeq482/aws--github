---
- name: ✅ Test Connectivity to Private Host via Bastion
  hosts: private_server
  gather_facts: false
  tasks:
    - name: 🖥️ Whoami on Private Host
      ansible.builtin.command: whoami
      register: whoami_output

    - name: 🔍 Show whoami result
      ansible.builtin.debug:
        msg: "Connected to {{ inventory_hostname }} as {{ whoami_output.stdout }}"

    - name: ✅ Confirm Bastion Message Was Printed (if visible)
      ansible.builtin.shell: echo 'Connection reached. If bastion was used, its banner message might be in debug output or logs.'
