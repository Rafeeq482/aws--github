---
- name: Test WinRM HTTPS connection to Windows host
  hosts: winserver1
  gather_facts: no
  vars:
    ansible_connection: winrm
    ansible_port: 5986
    ansible_winrm_transport: ssl
    ansible_winrm_server_cert_validation: ignore
    ansible_user: Administrator
    ansible_password: "XVx@0D*GK8OFJfw3KT*la&.8$utgToC%"

  tasks:
    - name: Ping over WinRM
      ansible.windows.win_ping:

    - name: Show basic Windows info
      ansible.windows.win_shell: |
        hostname
        systeminfo | findstr /B /C:"OS Name" /C:"OS Version"
      register: win_info

    - name: Print gathered info
      debug:
        var: win_info.stdout_lines
