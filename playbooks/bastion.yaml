---
- name: ğŸ” Test Bastion PEM Key Injection
  hosts: localhost
  gather_facts: false
  tasks:

    - name: ğŸ†” Print current user UID
      ansible.builtin.command: id -u
      register: uid_output

    - name: ğŸ” Show UID
      ansible.builtin.debug:
        msg: "{{ uid_output.stdout }}"

    - name: ğŸ§ª List files in /runner/env/
      ansible.builtin.command: ls -l /runner/env/
      register: env_files

    - name: ğŸ” Show files in /runner/env/
      ansible.builtin.debug:
        var: env_files.stdout_lines

    - name: ğŸ”§ Fix permission for bastion key (no sudo)
      ansible.builtin.command: chmod 600 /runner/env/template.ssh_key_bastion

    - name: ğŸ§ª Confirm Bastion Key Connection (if possible)
      ansible.builtin.command: echo "âœ… Connected to Bastion Host"

